<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout.html}">

<head>
<title>Quản lý chiết khấu</title>
</head>

<body>
	<main class="app-main">
		<div layout:fragment="content">
			<div class="container mt-4">

				<div class="d-flex justify-content-between align-items-center mb-3">
					<h3 class="fw-bold mb-0">Danh sách chiết khấu</h3>
					<a th:href="@{/admin/discountPolicies/add}"
						class="btn btn-success rounded-pill"> <i
						class="bi bi-plus-circle-fill me-1"></i> Thêm chiết khấu
					</a>
				</div>

				<div class="table-responsive shadow-sm rounded">
					<table class="table table-striped table-hover align-middle">
						<thead class="table-success">
							<tr>
								<th scope="col">STT</th>
								<th scope="col">Tên chính sách</th>
								<th scope="col">Giá trị</th>
								<th scope="col">Thời gian</th>
								<th scope="col">Trạng thái</th>
								<th scope="col">Số shop áp dụng</th>
								<th scope="col">Hành động</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="discountPolicy, iterStat : ${discountPolicies}">
								<td th:text="${iterStat.index + 1}"></td>

								<td><span th:text="${discountPolicy.policyName}"
									data-bs-toggle="tooltip" data-bs-placement="right"
									th:attr="title=${discountPolicy.description}"
									data-bs-custom-class="tooltip-modern">
								</span>
								<td th:text="${discountPolicy.discountValue} + '%'"></td>

								<td><span
									th:text="${#temporals.format(discountPolicy.startDate, 'dd/MM/yyyy')}"></span>
									- <span
									th:text="${discountPolicy.endDate != null ? #temporals.format(discountPolicy.endDate, 'dd/MM/yyyy') : 'Không giới hạn'}"></span>
								</td>

								<td><span
									th:classappend="${discountPolicy.status == 1} ? 'bg-success-subtle text-success border border-success-subtle' : 'bg-secondary-subtle text-secondary border border-secondary-subtle'"
									class="badge d-inline-flex align-items-center gap-1 px-3 py-2 rounded-pill fw-semibold">
										<i
										th:class="${discountPolicy.status == 1} ? 'bi bi-check-circle-fill' : 'bi bi-pause-circle-fill'"></i>
										<span
										th:text="${discountPolicy.status == 1 ? 'Hoạt động' : 'Tạm khoá'}"></span>
								</span></td>

								<td
									th:text="${discountPolicy.shops != null ? discountPolicy.shops.size() : 0}"></td>

								<td>
									<div class="d-flex gap-2 justify-content-start">
										<a
											th:href="@{'/admin/discountPolicies/detail/' + ${discountPolicy.policyId}}"
											class="btn btn-outline-info btn-sm rounded-pill"> <i
											class="bi bi-eye"></i> Xem
										</a> <a
											th:href="@{'/admin/discountPolicies/edit/' + ${discountPolicy.policyId}}"
											class="btn btn-outline-warning btn-sm rounded-pill"> <i
											class="bi bi-pencil-square"></i> Sửa
										</a> <a
											th:href="@{'/admin/discountPolicies/delete/' + ${discountPolicy.policyId}}"
											class="btn btn-outline-danger btn-sm rounded-pill">
											<i class="bi bi-trash3"></i> Xóa
										</a> 
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</main>
</body>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    tooltipTriggerList.forEach(el => new bootstrap.Tooltip(el));
  });
</script>

</html>





