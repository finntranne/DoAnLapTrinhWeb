<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout.html}">

<head>
<title>Quản lý chiết khấu</title>
</head>

<body>
	<main class="app-main">
		<div layout:fragment="content">
			<div class="container mt-4">

				<div class="card border-0 shadow-lg rounded-4 overflow-hidden">
					<div class="card-body p-4 d-flex flex-column">
						<h4 class="card-title text-success fw-bold mb-3"
							th:text="${discountPolicy.policyName}"></h4>

						<p class="card-text text-muted mb-3"
							th:text="${discountPolicy.description}"></p>

						<div class="d-flex flex-column gap-2">
							<div>
								<strong class="text-dark">Giá trị chiết khấu:</strong> <span
									class="badge bg-success-subtle text-success px-3 py-2 fs-6"
									th:text="${discountPolicy.discountValue + '%'}"></span>
							</div>

							<div>
								<strong class="text-dark">Thời gian:</strong> <span
									th:text="${#temporals.format(discountPolicy.startDate, 'dd/MM/yyyy')}"></span>
								- <span
									th:text="${discountPolicy.endDate != null ? #temporals.format(discountPolicy.endDate, 'dd/MM/yyyy') : 'Không xác định'}"></span>
							</div>
						</div>
					</div>
				</div>

				<hr>

				<!-- Tiêu đề danh sách -->
				<h5 class="mt-4 text-success fw-bold mb-3">Các shop đang áp
					dụng chính sách:</h5>

				<!-- Thanh nút hành động -->
				<div class="d-flex justify-content-between align-items-center mb-3">
					<!-- Nút quay lại -->
					<a th:href="@{'/admin/discountPolicies'}"
						class="btn btn-outline-secondary rounded-pill shadow-sm"> <i
						class="bi bi-arrow-left-circle me-1"></i> Quay lại
					</a>

					<!-- Nút thêm cửa hàng -->
					<a
						th:href="@{'/admin/discountPolicies/' + ${discountPolicy.policyId} + '/addShop'}"
						class="btn btn-success rounded-pill shadow-sm"> <i
						class="bi bi-plus-circle-fill me-1"></i> Thêm cửa hàng
					</a>
				</div>

				<!-- Bảng dữ liệu -->
				<table
					class="table table-striped table-hover align-middle shadow-sm">
					<thead class="table-success">
						<tr>
							<th class="text-center">STT</th>
							<th class="text-center">Tên shop</th>
							<th class="text-center">Chủ shop</th>
							<th class="text-center">Số điện thoại</th>
							<th class="text-center">Địa chỉ</th>
							<th class="text-center">Hành động</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="shop, iterStat : ${appliedShops}">
							<td class="text-center" th:text="${iterStat.index + 1}"></td>
							<td th:text="${shop.shopName}"></td>
							<td
								th:text="${shop.owner != null ? shop.owner.fullname : 'Không có dữ liệu'}"></td>
							<td th:text="${shop.phone}"></td>
							<td th:text="${shop.address}"></td>
							<td class="text-center"><a
								th:href="@{'/admin/discountPolicies/delete/' + ${discountPolicy.policyId} + '/' + ${shop.shopId}}"
								class="btn btn-outline-danger btn-sm rounded-pill">
									<i class="bi bi-trash3"></i> Xóa
							</a></td>
						</tr>

						<!-- Khi không có shop -->
						<tr th:if="${#lists.isEmpty(appliedShops)}">
							<td colspan="6" class="text-center text-muted fst-italic py-3">
								Chưa có shop nào áp dụng chính sách này</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</main>
</body>


</html>





